{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}{% endblock %} - MensaGO</title>
	
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	
	<!-- Main CSS -->
	<link rel="stylesheet" href="{% static 'css/base.css' %}">

	<link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>
	
	<!-- Custom CSS -->
	{% block extra_css %}{% endblock %}

	<!-- Custom Bootstrap CSS -->
	{% comment %} <link rel="stylesheet" href="{% static 'css/custom-bootstrap.css' %}"> {% endcomment %}
</head>
<body class="{% block body_class %}{% endblock %}">
	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg bg-white shadow-sm py-3">
		<div class="container-fluid px-4">
			<!-- Logo + Scritta Mensa GO -->
			<a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
				<img src="{% static 'imgs/logo.png' %}" alt="Logo" width="40" height="40" class="nav_logo" />
				<span class="fw-semibold fs-5">MensaGO</span>
			</a>

			<!-- Roba per mobile -->
			{% block nav_mobile %}{% endblock %}

			<!-- link alle pagine -->
			<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
				<ul class="navbar-nav align-items-center">
					{% block nav_elements %}{% endblock %}
				</ul>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<main>
		{% block content %}{% endblock %}
	</main>

	<!-- Footer -->
	<footer class="text-center text-muted"> <!-- TODO: FAi grosso! -->
		<div class="container">
			<p>Â© {% now "Y" %} MensaGO</p>
		</div>
	</footer>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	
	<!-- Geolocalization -->
	{% if pos is None %}
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			navigator.geolocation.getCurrentPosition(
			function(position) {
				fetch('{% url "save_user_pos" %}', {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
					"X-CSRFToken": "{{ csrf_token }}"
				},
				body: JSON.stringify({
					lat: position.coords.latitude,
					lon: position.coords.longitude
				})
				})
				.then(() => location.reload());
			},
				function(error) {
					console.warn("Geolocalizzazione non autorizzata:", error);
				}
			);
		});
	</script>
	{% endif %}

	<!-- Custom JS -->
	{% block extra_js %}{% endblock %}
</body>
</html>